/*
 * This file is autogenerated with bcop:
 * The Compiz option code generator
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include <compiz-core.h>

#include "stereo3d_options.h"

static int Stereo3dOptionsDisplayPrivateIndex;

static CompMetadata stereo3dOptionsMetadata;

static CompPluginVTable *stereo3dPluginVTable = NULL;
CompPluginVTable stereo3dOptionsVTable;

#define STEREO3D_OPTIONS_DISPLAY(d) PLUGIN_DISPLAY(d, Stereo3dOptions, o)
#define STEREO3D_OPTIONS_SCREEN(s) PLUGIN_SCREEN(s, Stereo3dOptions, o)

typedef struct _Stereo3dOptionsDisplay
{
    int screenPrivateIndex;

    CompOption opt[Stereo3dDisplayOptionNum];
    stereo3dDisplayOptionChangeNotifyProc notify[Stereo3dDisplayOptionNum];
} Stereo3dOptionsDisplay;

typedef struct _Stereo3dOptionsScreen
{
} Stereo3dOptionsScreen;

int stereo3dGetOutputMode (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionOutputMode].value.i;
}

CompOption * stereo3dGetOutputModeOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionOutputMode];
}

void stereo3dSetOutputModeNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionOutputMode] = notify;
}

Bool stereo3dGetInvert (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionInvert].value.b;
}

CompOption * stereo3dGetInvertOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionInvert];
}

void stereo3dSetInvertNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionInvert] = notify;
}

float stereo3dGetStrength (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionStrength].value.f;
}

CompOption * stereo3dGetStrengthOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionStrength];
}

void stereo3dSetStrengthNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionStrength] = notify;
}

float stereo3dGetFov (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionFov].value.f;
}

CompOption * stereo3dGetFovOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionFov];
}

void stereo3dSetFovNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionFov] = notify;
}

float stereo3dGetDepth (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionDepth].value.f;
}

CompOption * stereo3dGetDepthOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDepth];
}

void stereo3dSetDepthNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionDepth] = notify;
}

float stereo3dGetLightingStrength (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionLightingStrength].value.f;
}

CompOption * stereo3dGetLightingStrengthOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionLightingStrength];
}

void stereo3dSetLightingStrengthNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionLightingStrength] = notify;
}

float stereo3dGetEdgesStrength (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionEdgesStrength].value.f;
}

CompOption * stereo3dGetEdgesStrengthOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionEdgesStrength];
}

void stereo3dSetEdgesStrengthNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionEdgesStrength] = notify;
}

CompAction * stereo3dGetToggle (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionToggle].value.action;
}

void stereo3dSetToggleInitiate (CompDisplay *d, CompActionCallBackProc init)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionToggle].value.action.initiate = init;
}

void stereo3dSetToggleTerminate (CompDisplay *d, CompActionCallBackProc term)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionToggle].value.action.terminate = term;
}

CompOption * stereo3dGetToggleOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionToggle];
}

void stereo3dSetToggleNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionToggle] = notify;
}

CompAction * stereo3dGetMoveForegroundInButton (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionMoveForegroundInButton].value.action;
}

void stereo3dSetMoveForegroundInButtonInitiate (CompDisplay *d, CompActionCallBackProc init)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionMoveForegroundInButton].value.action.initiate = init;
}

void stereo3dSetMoveForegroundInButtonTerminate (CompDisplay *d, CompActionCallBackProc term)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionMoveForegroundInButton].value.action.terminate = term;
}

CompOption * stereo3dGetMoveForegroundInButtonOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionMoveForegroundInButton];
}

void stereo3dSetMoveForegroundInButtonNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionMoveForegroundInButton] = notify;
}

CompAction * stereo3dGetMoveForegroundOutButton (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionMoveForegroundOutButton].value.action;
}

void stereo3dSetMoveForegroundOutButtonInitiate (CompDisplay *d, CompActionCallBackProc init)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionMoveForegroundOutButton].value.action.initiate = init;
}

void stereo3dSetMoveForegroundOutButtonTerminate (CompDisplay *d, CompActionCallBackProc term)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionMoveForegroundOutButton].value.action.terminate = term;
}

CompOption * stereo3dGetMoveForegroundOutButtonOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionMoveForegroundOutButton];
}

void stereo3dSetMoveForegroundOutButtonNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionMoveForegroundOutButton] = notify;
}

CompAction * stereo3dGetResetForegroundDepthButton (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionResetForegroundDepthButton].value.action;
}

void stereo3dSetResetForegroundDepthButtonInitiate (CompDisplay *d, CompActionCallBackProc init)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionResetForegroundDepthButton].value.action.initiate = init;
}

void stereo3dSetResetForegroundDepthButtonTerminate (CompDisplay *d, CompActionCallBackProc term)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->opt[Stereo3dDisplayOptionResetForegroundDepthButton].value.action.terminate = term;
}

CompOption * stereo3dGetResetForegroundDepthButtonOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionResetForegroundDepthButton];
}

void stereo3dSetResetForegroundDepthButtonNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionResetForegroundDepthButton] = notify;
}

Bool stereo3dGetDrawmouse (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return od->opt[Stereo3dDisplayOptionDrawmouse].value.b;
}

CompOption * stereo3dGetDrawmouseOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDrawmouse];
}

void stereo3dSetDrawmouseNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionDrawmouse] = notify;
}

CompMatch * stereo3dGetWindowMatch (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionWindowMatch].value.match;
}

CompOption * stereo3dGetWindowMatchOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionWindowMatch];
}

void stereo3dSetWindowMatchNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionWindowMatch] = notify;
}

CompMatch * stereo3dGetDesktopMatch (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDesktopMatch].value.match;
}

CompOption * stereo3dGetDesktopMatchOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDesktopMatch];
}

void stereo3dSetDesktopMatchNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionDesktopMatch] = notify;
}

CompMatch * stereo3dGetDockMatch (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDockMatch].value.match;
}

CompOption * stereo3dGetDockMatchOption (CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[Stereo3dDisplayOptionDockMatch];
}

void stereo3dSetDockMatchNotify (CompDisplay *d, stereo3dDisplayOptionChangeNotifyProc notify)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    od->notify[Stereo3dDisplayOptionDockMatch] = notify;
}

CompOption * stereo3dGetDisplayOption (CompDisplay *d, Stereo3dDisplayOptions num)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    return &od->opt[num];
}

static const CompMetadataOptionInfo stereo3dOptionsDisplayOptionInfo[] = {
    { "output_mode", "int", "<min>0</min><max>3</max>", 0, 0 },
    { "invert", "bool", 0, 0, 0 },
    { "strength", "float", "<min>0</min><max>300</max>", 0, 0 },
    { "fov", "float", "<min>10.0</min><max>120.0</max>", 0, 0 },
    { "depth", "float", "<min>0.0</min><max>4.0</max>", 0, 0 },
    { "lighting_strength", "float", "<min>0.0</min><max>1.0</max>", 0, 0 },
    { "edges_strength", "float", "<min>0.0</min><max>1.0</max>", 0, 0 },
    { "toggle", "key", 0, 0, 0 },
    { "move_foreground_in_button", "button", 0, 0, 0 },
    { "move_foreground_out_button", "button", 0, 0, 0 },
    { "reset_foreground_depth_button", "key", 0, 0, 0 },
    { "drawMouse", "bool", 0, 0, 0 },
    { "window_match", "match", 0, 0, 0 },
    { "desktop_match", "match", 0, 0, 0 },
    { "dock_match", "match", 0, 0, 0 },
};

static Bool stereo3dOptionsSetDisplayOption (CompPlugin *plugin, CompDisplay *d, const char *name, CompOptionValue *value)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    CompOption *o;
    int        index;

    o = compFindOption (od->opt, Stereo3dDisplayOptionNum, name, &index);

    if (!o)
        return FALSE;

    switch (index)
    {
     case Stereo3dDisplayOptionOutputMode:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionOutputMode])
                (*od->notify[Stereo3dDisplayOptionOutputMode]) (d, o, Stereo3dDisplayOptionOutputMode);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionInvert:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionInvert])
                (*od->notify[Stereo3dDisplayOptionInvert]) (d, o, Stereo3dDisplayOptionInvert);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionStrength:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionStrength])
                (*od->notify[Stereo3dDisplayOptionStrength]) (d, o, Stereo3dDisplayOptionStrength);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionFov:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionFov])
                (*od->notify[Stereo3dDisplayOptionFov]) (d, o, Stereo3dDisplayOptionFov);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionDepth:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionDepth])
                (*od->notify[Stereo3dDisplayOptionDepth]) (d, o, Stereo3dDisplayOptionDepth);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionLightingStrength:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionLightingStrength])
                (*od->notify[Stereo3dDisplayOptionLightingStrength]) (d, o, Stereo3dDisplayOptionLightingStrength);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionEdgesStrength:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionEdgesStrength])
                (*od->notify[Stereo3dDisplayOptionEdgesStrength]) (d, o, Stereo3dDisplayOptionEdgesStrength);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionToggle:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionToggle])
                (*od->notify[Stereo3dDisplayOptionToggle]) (d, o, Stereo3dDisplayOptionToggle);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionMoveForegroundInButton:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionMoveForegroundInButton])
                (*od->notify[Stereo3dDisplayOptionMoveForegroundInButton]) (d, o, Stereo3dDisplayOptionMoveForegroundInButton);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionMoveForegroundOutButton:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionMoveForegroundOutButton])
                (*od->notify[Stereo3dDisplayOptionMoveForegroundOutButton]) (d, o, Stereo3dDisplayOptionMoveForegroundOutButton);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionResetForegroundDepthButton:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionResetForegroundDepthButton])
                (*od->notify[Stereo3dDisplayOptionResetForegroundDepthButton]) (d, o, Stereo3dDisplayOptionResetForegroundDepthButton);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionDrawmouse:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionDrawmouse])
                (*od->notify[Stereo3dDisplayOptionDrawmouse]) (d, o, Stereo3dDisplayOptionDrawmouse);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionWindowMatch:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionWindowMatch])
                (*od->notify[Stereo3dDisplayOptionWindowMatch]) (d, o, Stereo3dDisplayOptionWindowMatch);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionDesktopMatch:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionDesktopMatch])
                (*od->notify[Stereo3dDisplayOptionDesktopMatch]) (d, o, Stereo3dDisplayOptionDesktopMatch);
            return TRUE;
        }
        break;
     case Stereo3dDisplayOptionDockMatch:
        if (compSetDisplayOption (d, o, value))
        {
            if (od->notify[Stereo3dDisplayOptionDockMatch])
                (*od->notify[Stereo3dDisplayOptionDockMatch]) (d, o, Stereo3dDisplayOptionDockMatch);
            return TRUE;
        }
        break;
    default:
        break;
    }
    return FALSE;
}

static CompOption * stereo3dOptionsGetDisplayOptions (CompPlugin *plugin, CompDisplay *d, int *count)
{
    STEREO3D_OPTIONS_DISPLAY(d);
    if (!od)
    {
        *count = 0;
        return NULL;
    }
    *count = Stereo3dDisplayOptionNum;
    return od->opt;
}

static Bool stereo3dOptionsInitScreen (CompPlugin *p, CompScreen *s)
{
    Stereo3dOptionsScreen *os;
    
    STEREO3D_OPTIONS_DISPLAY (s->display);

    os = calloc (1, sizeof(Stereo3dOptionsScreen));
    if (!os)
        return FALSE;

    s->base.privates[od->screenPrivateIndex].ptr = os;

    
    return TRUE;
}

static void stereo3dOptionsFiniScreen (CompPlugin *p, CompScreen *s)
{
    STEREO3D_OPTIONS_SCREEN (s);
    STEREO3D_OPTIONS_DISPLAY (s->display);

    free (os);
    s->base.privates[od->screenPrivateIndex].ptr = NULL;
}

static Bool stereo3dOptionsInitDisplay (CompPlugin *p, CompDisplay *d)
{
    Stereo3dOptionsDisplay *od;
   
    
    od = calloc (1, sizeof(Stereo3dOptionsDisplay));
    if (!od)
        return FALSE;

    od->screenPrivateIndex = allocateScreenPrivateIndex(d);
    if (od->screenPrivateIndex < 0)
    {
        free(od);
        return FALSE;
    }

    d->base.privates[Stereo3dOptionsDisplayPrivateIndex].ptr = od;

    if (!compInitDisplayOptionsFromMetadata (d, &stereo3dOptionsMetadata, stereo3dOptionsDisplayOptionInfo, od->opt, Stereo3dDisplayOptionNum))
    {
        free (od);
        return FALSE;
    }

    return TRUE;
}

static void stereo3dOptionsFiniDisplay (CompPlugin *p, CompDisplay *d)
{
    STEREO3D_OPTIONS_DISPLAY (d);

    freeScreenPrivateIndex(d, od->screenPrivateIndex);

    compFiniDisplayOptions (d, od->opt, Stereo3dDisplayOptionNum);

    free (od);
    d->base.privates[Stereo3dOptionsDisplayPrivateIndex].ptr = NULL;
}

static Bool stereo3dOptionsInit (CompPlugin *p)
{
    Stereo3dOptionsDisplayPrivateIndex = allocateDisplayPrivateIndex();
    if (Stereo3dOptionsDisplayPrivateIndex < 0)
        return FALSE;

    if (!compInitPluginMetadataFromInfo (&stereo3dOptionsMetadata, "stereo3d",stereo3dOptionsDisplayOptionInfo, Stereo3dDisplayOptionNum, 0, 0))
        return FALSE;

    compAddMetadataFromFile (&stereo3dOptionsMetadata, "stereo3d");
    if (stereo3dPluginVTable && stereo3dPluginVTable->init)
        return stereo3dPluginVTable->init (p);
    return TRUE;
}

static void stereo3dOptionsFini (CompPlugin *p)
{
    if (stereo3dPluginVTable && stereo3dPluginVTable->fini)
        stereo3dPluginVTable->fini (p);

    if (Stereo3dOptionsDisplayPrivateIndex >= 0)
        freeDisplayPrivateIndex (Stereo3dOptionsDisplayPrivateIndex);

    compFiniMetadata (&stereo3dOptionsMetadata);
}

static CompBool stereo3dOptionsInitObject (CompPlugin *p, CompObject *o)
{
    static InitPluginObjectProc dispTab[] = {
        (InitPluginObjectProc) 0,
        (InitPluginObjectProc) stereo3dOptionsInitDisplay,
        (InitPluginObjectProc) stereo3dOptionsInitScreen
    };

    RETURN_DISPATCH (o, dispTab, ARRAY_SIZE (dispTab), TRUE, (p, o));
}

static void stereo3dOptionsFiniObject (CompPlugin *p, CompObject *o)
{
    static FiniPluginObjectProc dispTab[] = {
        (FiniPluginObjectProc) 0,
        (FiniPluginObjectProc) stereo3dOptionsFiniDisplay,
        (FiniPluginObjectProc) stereo3dOptionsFiniScreen
    };

    DISPATCH (o, dispTab, ARRAY_SIZE (dispTab), (p, o));
}

static CompBool stereo3dOptionsInitObjectWrapper (CompPlugin *p, CompObject *o)
{
    CompBool rv = TRUE;
    rv = stereo3dOptionsInitObject (p, o);
    if (stereo3dPluginVTable->initObject)
        rv &= stereo3dPluginVTable->initObject (p, o);
    return rv;
}

static void stereo3dOptionsFiniObjectWrapper (CompPlugin *p, CompObject *o)
{
    if (stereo3dPluginVTable->finiObject)
        stereo3dPluginVTable->finiObject (p, o);
    stereo3dOptionsFiniObject (p, o);
}

static CompOption * stereo3dOptionsGetObjectOptions (CompPlugin *p, CompObject *o, int *count)
{
    static GetPluginObjectOptionsProc dispTab[] = {
        (GetPluginObjectOptionsProc) 0,
            (GetPluginObjectOptionsProc) stereo3dOptionsGetDisplayOptions,
    };

    *count = 0;
    RETURN_DISPATCH (o, dispTab, ARRAY_SIZE (dispTab),
		     NULL, (p, o, count));
}

static CompBool stereo3dOptionsSetObjectOption (CompPlugin *p, CompObject *o, const char *name, CompOptionValue *value)
{
    static SetPluginObjectOptionProc dispTab[] = {
        (SetPluginObjectOptionProc) 0,
        (SetPluginObjectOptionProc) stereo3dOptionsSetDisplayOption,
    };

    RETURN_DISPATCH (o, dispTab, ARRAY_SIZE (dispTab), FALSE,
		     (p, o, name, value));
}

static CompMetadata *
stereo3dOptionsGetMetadata (CompPlugin *plugin)
{
    return &stereo3dOptionsMetadata;
}

CompPluginVTable *getCompPluginInfo20070830 (void)
{
    if (!stereo3dPluginVTable)
    {
        stereo3dPluginVTable = getCompPluginInfo ();
        memcpy(&stereo3dOptionsVTable, stereo3dPluginVTable, sizeof(CompPluginVTable));
        stereo3dOptionsVTable.getMetadata = stereo3dOptionsGetMetadata;
        stereo3dOptionsVTable.init = stereo3dOptionsInit;
        stereo3dOptionsVTable.fini = stereo3dOptionsFini;
        stereo3dOptionsVTable.initObject = stereo3dOptionsInitObjectWrapper;
        stereo3dOptionsVTable.finiObject = stereo3dOptionsFiniObjectWrapper;
        stereo3dOptionsVTable.getObjectOptions = stereo3dOptionsGetObjectOptions;
	stereo3dOptionsVTable.setObjectOption = stereo3dOptionsSetObjectOption;
	
    }
    return &stereo3dOptionsVTable;
}

